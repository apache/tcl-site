<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type"><title>Request data handling</title><meta name="generator" content="DocBook XSL Stylesheets V1.50.0"><link rel="home" href="index.html" title="Websh Reference"><link rel="up" href="index.html" title="Websh Reference"><link rel="previous" href="command_dispatching_and_session_management.html" title="Command dispatching and session management"><link rel="next" href="response_data_handling.html" title="Response data handling"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Request data handling</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="command_dispatching_and_session_management.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="response_data_handling.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><hr><h2 class="title" style="clear: both"><a name="request_data_handling"></a>Request data handling</h2></div></div><div class="section"><div class="titlepage"><div><h3 class="title"><a name="web::request"></a>web::request</h3></div></div><p style="width:90%">

	</p><div class="cmdsynopsis"><span style="background:#bbbbff"><span style="font-weight:bold"><tt>web::request</tt></span>  ?<tt><span style="text-decoration:underline"><i><tt>options</tt></i></span></tt>? ?<tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt>? ?<tt><span style="text-decoration:underline"><i><tt>value</tt></i></span></tt>?<span style="font-weight:bold"><tt>web::request</tt></span>  ?<tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt>? ?<tt><span style="text-decoration:underline"><i><tt>default</tt></i></span></tt>?</span></div><p style="width:90%">
      </p><p style="width:90%">
	Options are: <tt><span style="text-decoration:underline">-count</span></tt>, <tt><span style="text-decoration:underline">-set</span></tt>,
        <tt><span style="text-decoration:underline">-lappend</span></tt>, <tt><span style="text-decoration:underline">-names</span></tt>,
        <tt><span style="text-decoration:underline">-unset</span></tt>, <tt><span style="text-decoration:underline">-reset</span></tt> and
        <tt><span style="text-decoration:underline">-channel</span></tt> fixme: gibt es -channel noch?
      </p><p style="width:90%">

	web::request is an accessor to CGI related information.

	</p><div class="variablelist"><dl><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::request</b></span></span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		returns a list of all known keys.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::request</b></span> <tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt>
	      ?<tt><span style="text-decoration:underline"><i><tt>default</tt></i></span></tt>?</span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		returns the value for <tt><span style="text-decoration:underline">key</span></tt>. Can be a
		list. In case that <tt><span style="text-decoration:underline">key</span></tt> does not
		exist, return <tt><span style="text-decoration:underline">default</span></tt>, if it is
		given, or an empty string.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::request</b></span>
	      <tt><span style="text-decoration:underline">-count</span></tt> <tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt></span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		returns number of items in list for
		<tt><span style="text-decoration:underline">key</span></tt>; returns 0 if
		<tt><span style="text-decoration:underline">key</span></tt> does not exist.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::request</b></span>
	      <tt><span style="text-decoration:underline">-set</span></tt> <tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt></span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		does the same as <span style="font-family:monospace"><b>web::request</b></span>
		<tt><span style="text-decoration:underline">key</span></tt>.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::request</b></span>
	      <tt><span style="text-decoration:underline">-set</span></tt> <tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt>
	      <tt><span style="text-decoration:underline"><i><tt>value</tt></i></span></tt>
	      ?<tt><span style="text-decoration:underline"><i><tt>value</tt></i></span></tt>?
	      ?<tt><span style="text-decoration:underline"><i><tt>...</tt></i></span></tt>?</span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		adds the parameter <tt><span style="text-decoration:underline">key</span></tt> to the
		web::request data.  Any existing parameters with
		<tt><span style="text-decoration:underline">key</span></tt> are overwritten.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::request</b></span>
	      <tt><span style="text-decoration:underline">-lappend</span></tt> <tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt>
	      <tt><span style="text-decoration:underline"><i><tt>value</tt></i></span></tt>
	      ?<tt><span style="text-decoration:underline"><i><tt>value</tt></i></span></tt>?
	      ?<tt><span style="text-decoration:underline"><i><tt>...</tt></i></span></tt>?</span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		append parameters with the same <tt><span style="text-decoration:underline">key</span></tt>
		to the web::request data. In this case the existing
		<tt><span style="text-decoration:underline">value</span></tt> is not overwritten.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::request</b></span>
	      <tt><span style="text-decoration:underline">-unset</span></tt></span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		deletes all parameters from the web::request data.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::request</b></span>
	      <tt><span style="text-decoration:underline">-unset</span></tt> <tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt></span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		deletes a parameter from the web::request data.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::request</b></span>
	      <tt><span style="text-decoration:underline">-reset</span></tt></span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		deletes all parameters from the web::request data
		(like 'web::request -unset'), removes all static
		parameters (like 'web::cmdurlcfg -unset'), all form
		variables (like 'web::formvar -unset'), all query
		string parameters (like 'web::param -unset'), and all
		temporary files created by HTTP form upload.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::request</b></span>
	      <tt><span style="text-decoration:underline">-channel</span></tt></span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		fixme: what does it do?
	      </div></div></dd></dl></div><p style="width:90%">

      </p></div><div class="section"><div class="titlepage"><div><h3 class="title"><a name="web::param"></a>web::param</h3></div></div><p style="width:90%">


	</p><div class="cmdsynopsis"><span style="background:#bbbbff"><span style="font-weight:bold"><tt>web::param</tt></span>  ?<tt><span style="text-decoration:underline"><i><tt>options</tt></i></span></tt>? ?<tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt>? ?<tt><span style="text-decoration:underline"><i><tt>value</tt></i></span></tt>? ?<tt><span style="text-decoration:underline"><i><tt>...</tt></i></span></tt>?</span></div><p style="width:90%">

	Options are: <tt><span style="text-decoration:underline">-count</span></tt>, <tt><span style="text-decoration:underline">-set</span></tt>,
	<tt><span style="text-decoration:underline">-lappend</span></tt>, <tt><span style="text-decoration:underline">-names</span></tt>, and
	<tt><span style="text-decoration:underline">-unset</span></tt>

      </p><p style="width:90%">
	web::param is an accessor to state information from the
	querystring.  Suppose the querystring is &quot;lang=EN&quot;.
	After web::dispatch has parsed the querystring,
	<span style="font-family:monospace"><b>web::param</b></span> <tt><span style="text-decoration:underline">lang</span></tt> will
	report <tt>EN</tt>.  Additionaly,
	web::param can manage this data and add, append, and delete
	parameters as needed.

	</p><div class="variablelist"><dl><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::param</b></span> <tt><span style="text-decoration:underline">-names</span></tt></span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		returns a list of all known keys.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::param</b></span> <tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt>
	      ?<tt><span style="text-decoration:underline"><i><tt>default</tt></i></span></tt>?</span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		returns the value for <tt><span style="text-decoration:underline">key</span></tt>. Can be a
		list. In case that <tt><span style="text-decoration:underline">key</span></tt> does not
		exist, return <tt><span style="text-decoration:underline">default</span></tt>, if it is
		given, or an empty string.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::param</b></span>
	      <tt><span style="text-decoration:underline">-count</span></tt> <tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt></span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		returns number of items in list of
		<tt><span style="text-decoration:underline">key</span></tt>.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::param</b></span> <tt><span style="text-decoration:underline">-set</span></tt>
	      <tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt></span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		does the same as '<span style="font-family:monospace"><b>web::param</b></span>
		<tt><span style="text-decoration:underline">key</span></tt>'.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::param</b></span> <tt><span style="text-decoration:underline">-set</span></tt>
	      <tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt> <tt><span style="text-decoration:underline"><i><tt>value</tt></i></span></tt>
	      ?<tt><span style="text-decoration:underline"><i><tt>value</tt></i></span></tt>?
	      ?<tt><span style="text-decoration:underline"><i><tt>...</tt></i></span></tt>?</span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		add the parameter <tt><span style="text-decoration:underline">key</span></tt> to the
		web::param data.  Any existing parameters with
		<tt><span style="text-decoration:underline">key</span></tt> are overwritten.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::param</b></span>
	      <tt><span style="text-decoration:underline">-lappend</span></tt> <tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt>
	      <tt><span style="text-decoration:underline"><i><tt>value</tt></i></span></tt>
	      ?<tt><span style="text-decoration:underline"><i><tt>value</tt></i></span></tt>?
	      ?<tt><span style="text-decoration:underline"><i><tt>...</tt></i></span></tt>?</span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		append parameters with the same <tt><span style="text-decoration:underline">key</span></tt>
		to the web::param data.  In this case the existing
		<tt><span style="text-decoration:underline">value</span></tt> is not overwritten.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::param</b></span> <tt><span style="text-decoration:underline">-unset</span></tt></span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		deletes all parameters from the web::param data.
	      </div></div></dd><dt><span style="background:#bbbbff"><span class="term"><span style="font-family:monospace"><b>web::param</b></span>
	      <tt><span style="text-decoration:underline">-unset</span></tt> <tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt></span></span></dt><dd><div style="padding:4 ; margin-top:3 ;  margin-bottom:3 ; width:75%"><div style="margin-bottom:6">
		delete a parameter from the web::param data.
	      </div></div></dd></dl></div><p style="width:90%">

      </p></div><div class="section"><div class="titlepage"><div><h3 class="title"><a name="web::formvar"></a>web::formvar</h3></div></div><p style="width:90%">

	</p><div class="cmdsynopsis"><span style="background:#bbbbff"><span style="font-weight:bold"><tt>web::formvar</tt></span>  ?<tt><span style="text-decoration:underline"><i><tt>options</tt></i></span></tt>? ?<tt><span style="text-decoration:underline"><i><tt>key</tt></i></span></tt>? ?<tt><span style="text-decoration:underline"><i><tt>value</tt></i></span></tt>?</span></div><p style="width:90%">
      </p>
      Exactly like <span style="font-family:monospace"><b>web::param</b></span>.
      <p style="width:90%">
	<span style="font-family:monospace"><b>web::formvar</b></span> is an accessor to HTML FORM
	data.  After <span style="font-family:monospace"><b>web::dispatch</b></span> has parsed the
	POST data, you can access all form fields using
	<span style="font-family:monospace"><b>web::formvar</b></span>.
      </p></div><div class="section"><div class="titlepage"></div><div class="example"><p class="title"><b>Example 5. web::param</b></p><pre style="background:#bbffbb ; width:75%" class="programlisting">
	  % web::request CONTENT_LENGTH
	  % web::dispatch -querystring &quot;cmd=default&amp;t=100&quot; -postdata &quot;&quot; -cmd &quot;&quot;
	  % web::param -names
	  t cmd
	  % web::param cmd
	  default
	  % web::param -set k v
	  v
	  % web::param -names
	  t cmd k
	  %
	</pre></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="command_dispatching_and_session_management.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="response_data_handling.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Command dispatching and session management </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Response data handling</td></tr></table></div></body></html>
